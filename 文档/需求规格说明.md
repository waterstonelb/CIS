
# 需求规格说明

|人员|日期|修改原因|版本|
|:-:|:-:|:-:|:-:|
|梁斌|2019/5/23|增加基本内容|v0.0|
|马永昶|2019/6/2|增加相关用例|v0.1|
|梁斌|2019/6/18|修改部分内容|v0.2|

## 目录

1. 引言

   1.1. 目的

   1.2. 范围

   1.3. 参考文献

2. 总体描述
   2.1. 项目前景

   2.2. 项目功能

   2.3.用户特征

3. 详细需求描述

   3.1. 功能需求

   3.2. 非功能需求

   3.3. 数据需求

   3.4. 其他

## 1. 引言

### 1.1 目的

本文档描述了影院系统的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。
除特殊说明外，本文档所包含的需求都是高优先级需求。

### 1.2 范围

影院系统是为了影院管理影片与观众选择电影所开发的业务系统，开发的目地是帮助影院方进行电影排片管理与处理观众订票等事务。
通过本系统的应用，会方便观众进行线上电影购票，便于影院方进行观众的购票管理、优惠管理以及影院事务的管理，提高双方效率，为双方提供最大化的便捷服务

### 1.3 参考文献

1）IEEE标准
2）软件工程与计算(二)

## 2. 总体描述

### 2.1 项目前景

#### 2.1.1 背景与机遇

随着网络技术的日益发展与智能终端的普及化，互联网开始慢慢的渗入日常生活中的每一处，老旧的电影方案并不能满足当前人们的日常需求，影院人工售票管理的效率低下的方式已经渐渐被取代，现急需一种互联网影院系统来处理影院事务。
我们的影院系统就是为了当下应对这种需求而产生的，它基于B2C的服务思想，影院方可通过此系统进行日常管理事务，用户方可通过此系统对电影进行查找和购买

#### 2.1.2 业务需求

BR1: 在使用系统6个月后，影院上座率提高30%

BR2: 在使用系统6个月后，影院所需工作人员减少50%

BR3: 在使用系统6个月后，观众购票次数平均每人提高20%

BR4: 在使用系统6个月后，影院销售额提高20%

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最好情况：40%

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最可能情况：20%

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最坏情况：10%

### 2.2 项目功能

SF1: 影院进行员工管理

SF2: 影院进行影厅管理

SF3: 观众随时查看影片信息

SF4: 观众进行购票、出票、退票

SF5: 增加影片销售途径

SF6: 影院方可快速了解市场行情变化

SF7: 影院进行优惠券发放

SF8: 发展会员，提高回头率

### 2.3 用户特征

<table rules="groups">
<tbody>
<tr><td>影院</td><td>每家影院有1个管理员，可以有多个经理和多个员工，管理员有整个影院方的全部功能，主要是可以管理影院人员，经理负责会员卡政策的制定和会员优惠券的发放，员工每天要进行影片排片，查看营收统计，还需要管理影院的影厅</td></tr>
</tbody>
<tbody>
<tr><td>观众</td><td>可以有系统支持最大数量(依据服务器能力决定)内所有数目的观众，他们可以在任意时间内进行影片查看与购买、出票、退票</td></tr>
</tbody>
</table>

### 2.4 约束

CON1: 系统可运行在Chrome、Firefox、Opera等主流浏览器

CON2: 系统使用web开发

CON3: 在项目中使用持续集成的方法进行开发

CON4: 在开发中，开发者要提交用例文档、软件需求规格说明文档、设计描述文档和测试报告

### 2.5 假设与依赖

AE1: 同一时间内，上下架电影数量差值不超过10%

AE2: 搜索结果页面按照电影名称来排序

## 3 详细需求描述

### 3.1 对外接口需求

#### 3.1.1 用户界面

![NJP1TJ~XLM`B{92`MA%PPKR.png](https://i.loli.net/2019/06/19/5d090e588a39387371.png)


#### 3.1.2 通信接口

CI: 前端使用REST接口与后端进行通讯

### 3.2 功能需求

### 3.2.1 会员政策管理

#### 3.2.1.1 特征描述

在影院方需要对会员卡的种类及其对应优惠政策进行管理时，进入系统相应界面，并对会员卡进行新增或修改，填写会员卡的种类、优惠折扣、会员卡获得条件的信息，最后储存更改并退出

#### 3.2.1.2 刺激/响应序列

刺激：影院方点击会员政策管理

响应：系统进入会员政策管理界面

刺激：影院方点击新增会员卡

响应：系统弹出新增会员操作界面，并要求影院方填写会员卡的种类、优惠折
扣、会员卡获得条件的信息

刺激：影院方填写完所有信息后点击提交

响应：系统询问是否确认提交

刺激：影院方填写信息有误但点击提交

响应：系统提示信息有误并返回

刺激：影院方点击确认提交

响应：系统保存新的会员卡信息和优惠策略并更新

刺激：影院方点击修改会员卡

响应：系统进入修改会员卡界面并要求影院方选择需要修改的会员卡

刺激：影院方选择需要修改的会员卡

响应：系统进入修改界面并要求影院方填写会员卡的种类、优惠折扣、会员卡
获得条件的信息

刺激：影院方填写完所有信息后点击提交

响应：系统询问是否确认提交

刺激：影院方填写信息有误但点击提交

响应：系统提示信息有误并返回

刺激：影院方点击确认提交

响应：系统保存新的会员卡信息和优惠策略并更新

#### 3.2.1.3 相关功能需求

<table rules="groups" style="border:1px"> 
<tbody>
<tr><td>Card.Start</td>    <td>影院方点击“会员政策管理”按钮后，系统进入会员政策管理界面</td></tr>
<tr><td>Card.Add </td>    <td>影院方点击添加会员政策后输入新的会员卡优惠信息优惠策略</td></tr>
<tr><td>Card.Select </td>    <td>影院方点击修改会员政策后选择需要修改的会员政策</td></tr>
</tbody>
<tr><td>Card.Edit </td>    <td>影院方填写新的会员卡优惠信息优惠策略</td></tr>
</tbody>
<tbody>
<tr><td>Card.Submit  </td>    <td>影院方完成填写后点击提交，并进行正确性检验，之后请求确认</td></tr>
<tr><td>Card.Redo </td>    <td>影院方点击取消，回退至submit前的状态</td></tr>
<tr><td>Card.Complete </td>    <td>影院方点击确认后保存修改的信息，并更新会员优惠策略</td></tr>
</tbody>
</table>

### 3.2.2 退票策略管理

#### 3.2.2.1 特征描述

在影院方需要对退票的限制和退费比例进行管理时，进入系统相应界面，并对退票策略进行新增或修改，最后储存更改并退出

#### 3.2.2.2 刺激/响应序列

刺激：影院方点击退票策略管理

响应：系统进入退票策略管理界面

刺激：影院方点击新增退票策略

响应：系统弹出新增退票策略操作界面，并要求影院方填写新的退票限制、退费比例

刺激：影院方填写完所有信息后点击提交

响应：系统询问是否确认提交

刺激：影院方填写信息有误但点击提交

响应：系统提示信息有误并返回

刺激：影院方点击确认提交

响应：系统保存新的退票策略并更新

刺激：影院方点击修改退票策略

响应：系统进入修改退票策略界面并要求影院方选择需要修改的退票策略

刺激：影院方选择需要修改的退票策略

响应：系统进入修改界面并要求影院方填写退票限制、退费比例

刺激：影院方填写完所有信息后点击提交

响应：系统询问是否确认提交

刺激：影院方填写信息有误但点击提交

响应：系统提示信息有误并返回

刺激：影院方点击确认提交

响应：系统保存新的退票策略并更新

#### 3.2.2.3 相关功能需求

<table rules="groups" style="border:1px"> 
<tbody>
<tr><td>RefundManage.Start</td>    <td>影院方点击“退票策略管理”按钮后，系统进入退票策略管理界面</td></tr>
<tr><td>RefundManage.Add </td>    <td>影院方点击添加退票策略后输入新的退票限制、退费比例</td></tr>
<tr><td>RefundManage.Select </td>    <td>影院方点击修改退票策略后选择需要修改的退票策略</td></tr>
</tbody>
<tr><td>RefundManage.Edit </td>    <td>影院方填写新的退票限制、退费信息</td></tr>
</tbody>
<tbody>
<tr><td>RefundManage.Submit  </td>    <td>影院方完成填写后点击提交，并进行正确性检验，之后请求确认</td></tr>
<tr><td>RefundManage.Redo </td>    <td>影院方点击取消，回退至submit前的状态</td></tr>
<tr><td>RefundManage.Complete </td>    <td>影院方点击确认后保存修改的信息，并更新退票策略</td></tr>
</tbody>
</table>

### 3.2.3 影厅信息管理

#### 3.2.3.1 特征描述

在影院方需要对影厅信息进行管理时，进入系统相应界面，并对影厅信息进行新增或修改，最后储存更改并退出

#### 3.2.3.2 刺激/响应序列

刺激：影院方点击影厅信息管理

响应：系统进入影厅信息管理界面

刺激：影院方点击新增影厅

响应：系统弹出新增影厅操作界面，并要求影院方填写新的影厅名称、影厅大小、缺座信息

刺激：影院方填写完所有信息后点击提交

响应：系统询问是否确认提交

刺激：影院方填写信息有误但点击提交

响应：系统提示信息有误并返回

刺激：影院方点击确认提交

响应：系统保存新的影厅信息并更新

刺激：影院方点击修改影厅

响应：系统进入修改影厅信息界面并要求影院方选择需要修改的影厅

刺激：影院方选择需要修改的影厅

响应：系统进入修改界面并要求影院方填写新的影厅名称、影厅大小、缺座信息

刺激：影院方填写完所有信息后点击提交

响应：系统询问是否确认提交

刺激：影院方填写信息有误但点击提交

响应：系统提示信息有误并返回

刺激：影院方点击确认提交

响应：系统保存新的影厅信息并更新

#### 3.2.3.3 相关功能需求

<table rules="groups" style="border:1px"> 
<tbody>
<tr><td>Hall.Start</td>    <td>影院方点击“影厅信息管理”按钮后，系统进入影厅信息管理界面</td></tr>
<tr><td>Hall.Add </td>    <td>影院方点击添加影厅信息后输入新的影厅大小、名称、缺座信息</td></tr>
<tr><td>Hall.Select </td>    <td>影院方点击修改影厅信息后选择需要修改的影厅信息</td></tr>
</tbody>
<tr><td>Hall.Edit </td>    <td>影院方填写新的影厅名称、大小、缺座信息</td></tr>
</tbody>
<tbody>
<tr><td>Hall.Submit  </td>    <td>影院方完成填写后点击提交，并进行正确性检验，之后请求确认</td></tr>
<tr><td>Hall.Redo </td>    <td>影院方点击取消，回退至submit前的状态</td></tr>
<tr><td>Hall.Complete </td>    <td>影院方点击确认后保存修改的信息，并更新影厅信息</td></tr>
</tbody>
</table>

### 3.2.4 影院角色管理

#### 3.2.4.1 特征描述

在影院方需要对影院角色进行管理时，进入系统相应界面，并对影院角色进行新增或修改，最后储存更改并退出

#### 3.2.4.2 刺激/响应序列

刺激：影院方点击影院角色管理

响应：系统进入影院角色管理界面

刺激：影院方点击新增影院角色

响应：系统弹出新增影院角色操作界面，并要求影院方填写新的角色类别、角色信息

刺激：影院方填写完所有信息后点击提交

响应：系统询问是否确认提交

刺激：影院方填写信息有误但点击提交

响应：系统提示信息有误并返回

刺激：影院方点击确认提交

响应：系统保存新的影院角色并更新

刺激：影院方点击修改影院角色

响应：系统进入修改影院角色界面并要求影院方选择需要修改的影院角色

刺激：影院方选择需要修改的影院角色

响应：系统进入修改界面并要求影院方填写角色类别、角色信息

刺激：影院方填写完所有信息后点击提交

响应：系统询问是否确认提交

刺激：影院方填写信息有误但点击提交

响应：系统提示信息有误并返回

刺激：影院方点击确认提交

响应：系统保存新的影院角色并更新

#### 3.2.4.3 相关功能需求

<table rules="groups" style="border:1px"> 
<tbody>
<tr><td>User.Start</td>    <td>影院方点击“影院角色管理”按钮后，系统进入影院角色管理界面</td></tr>
<tr><td>User.Add </td>    <td>影院方点击添加影院角色后输入新的影院角色类别、角色信息</td></tr>
<tr><td>User.Select </td>    <td>影院方点击修改影院角色后选择需要修改的影院角色</td></tr>
</tbody>
<tr><td>User.Edit </td>    <td>影院方填写新的影院角色类别、角色信息</td></tr>
</tbody>
<tbody>
<tr><td>User.Submit  </td>    <td>影院方完成填写后点击提交，并进行正确性检验，之后请求确认</td></tr>
<tr><td>User.Redo </td>    <td>影院方点击取消，回退至submit前的状态</td></tr>
<tr><td>User.Complete </td>    <td>影院方点击确认后保存修改的信息，并更新影院角色</td></tr>
</tbody>
</table>

### 3.2.5 赠送优惠券

#### 3.2.5.1 特征描述

在影院方需要向用户赠送优惠券时，点击赠送优惠券，选择需要赠送的用户名单，系统可以根据会员消费记录排名筛选出用户列表，影院方填写优惠券的优惠金额和使用条件后向指定用户赠送

#### 3.2.5.2 刺激/响应序列

刺激：影院方点击赠送优惠券

响应：系统进入赠送优惠券界面

刺激：影院方输入用户的筛选条件

响应：系统返回相应用户列表

刺激：影院方选择用户并填写优惠券的优惠金额和使用条件，并点击赠送

响应：系统询问是否确认

刺激：影院方点击确认

响应：系统保存更改并更新优惠券信息

刺激：影院方点击取消

响应：系统系统关闭赠送优惠券任务

#### 3.2.5.3 相关功能需求

<table rules="groups" style="border:1px"> 
<tbody>
<tr><td>Promotion.Start</td>    <td>影院方点击“赠送优惠券”按钮后，系统进入赠送优惠券界面</td></tr>
<tr><td>Promotion.Select </td>    <td>影院方选择需要赠送的用户列表</td></tr>
</tbody>
<tr><td>Promotion.Recommend </td>    <td>根据影院方提供的筛选信息显示符合要求的用户列表</td></tr>
<tr><td>Promotion.Edit </td>    <td>影院方填写优惠券的优惠金额和使用条件</td></tr>
</tbody>
<tbody>
<tr><td>Promotion.Submit  </td>    <td>影院方完成填写后点击赠送，进行正确性检验，之后请求确认</td></tr>
<tr><td>Promotion.Redo </td>    <td>影院方点击取消，回退至submit前的状态</td></tr>
<tr><td>Promotion.Complete </td>    <td>影院方点击确认后保存优惠券信息，并对获赠用户的信息进行更新</td></tr>
</tbody>
</table>

### 3.2.6 购票

#### 3.2.6.1 特征描述

在用户想要购票时，用户选择需要购买的票的张数，如果用户有优惠券可以使用优惠券抵扣金额，之后用户选择座位，系统根据其会员卡信息显示待支付金额，会员具有打折，用户完成支付

#### 3.2.6.2 刺激/响应序列

刺激：用户点击购票按钮

响应：系统进入购票界面

刺激：用户填写购票数量，且用户没有优惠券

响应：进入选座页面

刺激：用户填写购票数量，且用户有优惠券

响应：进入选择优惠券界面

刺激：用户选择需要使用的优惠券

响应：进入选座页面

刺激：用户点击了需要的座位

响应：根据用户会员卡信息计算会员卡打折后的票价，并请求用户确认

刺激：用户点击确认支付

响应：进入支付界面

刺激：用户点击取消支付

响应：回到选座阶段

刺激：用户完成支付

响应：显示完成支付，并更新用户的购票信息和影厅的座位信息

#### 3.2.6.3 相关功能需求

<table rules="groups" style="border:1px">
<tbody>
<tr><td>Purchase.Start</td>    <td>用户点击“购买”按钮后进入购票界面</td></tr>
<tr><td>Purchase.Quantity </td>    <td>用户填写需要购买的电影票数量</td></tr>
<tr><td>Purchase.Promotion </td>    <td>用户选择需要使用的电影票</td></tr>
<tr><td>Purchase.Select </td>    <td>用户选择座位</td></tr>
</tbody>
<tr><td>Promotion.Caculate </td>    <td>根据用户会员卡信息计算出最后的票价并显示</td></tr>
<tbody>
<tr><td>Promotion.Submit  </td>    <td>用户确认支付，进入支付界面</td></tr>
<tr><td>Promotion.Redo </td>    <td>用户取消支付，返回选座阶段</td></tr>
<tr><td>Promotion.Complete </td>    <td>显示支付成功并更新用户的购票信息和影厅的座位信息</td></tr>
</tbody>
</table>

### 3.2.7 出票

#### 3.2.7.1 特征描述

用户想要将已买的电影票出票，根据用户的购票信息让用户选择需要出票的订单，用户选择并确认后完成出票

#### 3.2.7.2 刺激/响应序列

刺激：用户点击出票按钮

响应：系统显示可出票的订单

刺激：用户选择需要出票的订单，并点击出票

响应：请求确认

刺激：用户点击取消

响应：重新显示可出票订单

刺激：用户点击确认

响应：显示出票二维码，并更新用户的订单状态

#### 3.2.7.3 相关功能需求

<table rules="groups" style="border:1px">
<tbody>
<tr><td>Draw.Start</td>    <td>用户点击“出票”按钮后进入出票会话</td></tr>
<tr><td>Draw.Show </td>    <td>根据用户的订单信息显示可出票的订单</td></tr>
<tr><td>Draw.Select </td>    <td>用户选择了需要出票的订单，提示是否确认</td></tr>
<tr><td>Draw.Submit  </td>    <td>用户确认出票，显示出票二维码并更新用户状态</td></tr>
<tr><td>Draw.Redo </td>    <td>用户取消出票，重新展示可出票订单</td></tr>
</tbody>
</table>

### 3.2.8 退票

#### 3.2.8.1 特征描述

用户想要将已买的电影票退票，根据用户的购票信息让用户选择需要退票的订单，用户选择并确认后完成退票

#### 3.2.8.2 刺激/响应序列

刺激：用户点击退票按钮

响应：系统显示可退票的订单

刺激：用户选择需要退票的订单

响应：根据订单信息和退票策略计算用户可获得的退款，并请求确认

刺激：用户点击取消

响应：重新显示可退票订单

刺激：用户点击确认

响应：将退款返还用户，提示退票成功并更新用户订单信息

#### 3.2.8.3 相关功能需求

<table rules="groups" style="border:1px">
<tbody>
<tr><td>Refund.Start</td>    <td>用户点击“退票”按钮后进入退票会话</td></tr>
<tr><td>Refund.Show </td>    <td>根据用户的订单信息显示可退票的订单</td></tr>
<tr><td>Refund.Select </td>    <td>用户选择了需要退票的订单，根据订单信息和退票策略计算退款金额并请求确认</td></tr>
<tr><td>Refund.Submit  </td>    <td>用户确认退票，将退款返还用户并更新用户订单状态</td></tr>
<tr><td>Refund.Redo </td>    <td>用户取消退票，重新展示可退票订单</td></tr>
</tbody>
</table>

### 3.2.9 查看历史充值、消费记录

#### 3.2.9.1 特征描述

用户想要查看历史充值、消费记录，进入相应界面后系统显示其历史充值、消费记录

#### 3.2.9.2 刺激/响应序列

刺激：用户点击查看历史记录

响应：系统提示选择历史充值记录、历史消费记录

刺激：用户选择历史充值记录

响应：显示用户所有充值的金额、时间

刺激：用户选择历史消费记录

响应：显示用户所有消费的金额、时间

#### 3.2.9.3 相关功能需求

<table rules="groups" style="border:1px">
<tbody>
<tr><td>UserHistory.Start</td>    <td>用户点击“历史记录”按钮后要求用户选择充值记录或消费记录</td></tr>
<tr><td>UserHistory.RechargeShow </td>    <td>显示用户所有充值的金额、时间</td></tr>
<tr><td>UserHistory.ConsumptionShow </td>    <td>显示用户所有消费的金额、时间</td></tr>
</table>

### 3.3 非功能需求

#### 3.3.1  安全性

Safety1: 系统应该只允许通过验证和授权的用户访问

Safety2: 系统应该按照用户身份验证用户的访问权限

Safety3: 在涉及交易时要再次验证身份

#### 3.3.2  可维护性

Modifiability1: 支付方式变化时，要在4人3天内完成更改

Modifiability2: 影院想增加影院角色类型时，要在4人一周内完成

Modifiability1: 观众有新的对更多种历史记录查询的要求时，要在4人一周内完成

#### 3.3.3  易用性

Usability1: 80%的功能不用经过培训就可使用

Usability2: 在用户被授权后进行功能指南

#### 3.3.4  可靠性

Reliability1: 在用户与服务器进行通讯时，如果发生网络故障，系统不能出现故障

&nbsp;&nbsp;&nbsp;Reliability1.1: 用户端应该检测到故障，并尝试重新连接3次，每次15秒

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reliability1.1.1: 重新连接后，用户应该继续之前的工作

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reliability1.1.2: 如果连接不成功，用户应该等待5分钟后再次重新连接

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reliability1.1.2.1: 重新连接后，用户应该继续之前的工作

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reliability1.1.2.2: 如果重新连接仍不成功，用户端报警

Reliability2: 当服务器访问量达到最大容纳量时，服务器不应瘫痪

&nbsp;&nbsp;&nbsp;Reliability1.1: 服务器对所有用户随机产生一个延时，在延时之后重新连接服务器

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reliability1.1.1: 重新连接后，用户应该继续之前的工作

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reliability1.1.2: 如果连接不成功，服务器对所有用户再次产生一个延时，延时后允许用户访问

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reliability1.1.2.1: 重新连接后，用户应该继续之前的工作

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reliability1.1.2.2: 如果重新连接仍不成功，提醒用户在5分钟后再次访问

#### 3.3.5  业务规则

BR1: 删除影厅时保证该影厅没有未来的排片

#### 3.3.6  约束

IC1: 需要在网络上部署一个服务器

### 3.4  数据需求

#### 3.4.1  数据定义

DR1: 系统需要储存一年内的观众购票记录与充值、消费记录

DR2: 系统需要储存影厅的大小、名称和缺座信息

DR3: 系统需要储存所有生效或失效的优惠卷信息

DR4: 系统需要储存所有生效或失效的会员卡信息

DR5: 系统需要储存所有生效或失效的退票策略信息

#### 3.4.2  默认数据

默认数据适用于以下情况:

- 系统中新增数据时
- 编辑数据时不小心将相关内容清空时

Default1: 影厅大小默认为15*15，缺座默认为无，名称默认为新建影厅

Default2: 会员卡默认没有折扣，没有限制条件

Default3: 优惠卷默认没有限制条件，优惠金额为0元

Default4: 退票策略默认为不可退票

Default5: 操作用户默认为当前用户

Default6: 搜索框默认内容为空

#### 3.4.3  数据格式要求

Foramt1: 影厅大小必须为数字

Format2: 会员卡折扣必须为数字

Format3: 所有的限制条件必须为数字

Format4: 退票比例必须为数字

Format5: 优惠卷优惠金额必须为数字

### 3.5  其他

1. 需对经理进行培训
2. 系统上线时进行初始化